<template>
  <div class="component-cropper">
    <el-button-group style="margin-bottom:10px;width:100%">
      <el-button @click="clickChooise" type="primary" style="width:50%">选择图片</el-button>
      <el-button @click="clickCut" type="primary" :disabled="!previewImg" style="width:50%">裁剪</el-button>
    </el-button-group>
    <div class="avatar-uploader component-upload-img" ref="box">
      <input @change="inputChange" hidden type="file" ref="input" accept="image/png, image/jpeg">
      <!--本地图片，仅供预览-->
      <img v-if="previewImg" :src="previewImg" class="avatar" ref="preview">
      <!--服务器上的图片-->
      <t-img v-else-if="value" :src="value" class="avatar" minHeight="150px"/>
      <!--没图片-->
      <i class="el-icon-picture avatar-uploader-icon" v-else></i>
    </div>
  </div>
</template>
<style scoped>
  img{
    max-width:100%;
  }
</style>
<style lang="scss">
  @import "cropper.theme";
  .component-cropper{
    @import "./libs/cropper.min.css";
    .avatar-uploader {
      width: 100%;
      box-sizing:border-box;
      min-height:200px;
      margin: 0 auto;
      margin-bottom: 10px;
      border: 1px solid $cropper-border-color;
      position: relative;
      overflow: hidden;
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .avatar-uploader .el-upload:hover {
      border-color: $cropper-border-hover-color;
    }
    .avatar-uploader-icon {
      font-size: 60px;
      color: $cropper-icon-color;
      width:100%;
      text-align: center;
      position: relative;
    }
    .avatar {
      width: 100%;
    }
  }
</style>
