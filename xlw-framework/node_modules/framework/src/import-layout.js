import Vue from 'vue'
import findVueFile from './findVueFile.js'
import extendsVueFile from './extendsVueFile.js'
let vueFiles = findVueFile(require.context('../../../../src/layout/', true, /\.vue$/), requireFile, 'src/layout/')
let layout = vueFiles.filter(item => item.path === './' && item.fileName === 'layout.vue')
let components = vueFiles.filter(item => item.path.match(/^\.\/components\/.+$/))
layout.forEach(item => {
  item.componentName = 'app'
})
components.forEach(item => {
  item.componentName = 't-' + item.fileName.replace(/\.vue$/, '')
})
let resultLayout = extendsVueFile(layout, components)
export default Vue.component('app', resultLayout.app)
function requireFile (filename) {
  filename = filename.replace(/^\.\//, '')
  return require('../../../../src/layout/' + filename)
}
